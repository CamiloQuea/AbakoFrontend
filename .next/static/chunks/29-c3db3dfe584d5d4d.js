"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29],{1029:function(e,r,t){t.d(r,{Z:function(){return j}});var n=t(5666),a=t.n(n),o=t(5893),s=t(1955),i=t(7294),l=t(3288),c=t(4285);function d(e,r,t,n,a,o,s){try{var i=e[o](s),l=i.value}catch(c){return void t(c)}i.done?r(l):Promise.resolve(l).then(n,a)}function u(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function p(e){var r,t=e.handleModal,n=e.shop_id,p=(0,i.useState)({}),h=p[0],m=p[1],x=function(e){var r=e.target.name,t=e.target.value;m((function(e){return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){u(e,r,t[r])}))}return e}({},e,u({},r,t))})),console.log(h)},g=(r=a().mark((function e(r){var o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,fetch("https://api.abako.xyz/api/user/shop/".concat(n,"/movement"),{method:"POST",headers:{"Content-Type":"application/json",accessToken:s.Z.get("accessToken"),refreshToken:s.Z.get("refreshToken")},body:JSON.stringify(h),credentials:"include"});case 3:return o=e.sent,e.t0=console,e.next=7,o.json();case 7:e.t1=e.sent,e.t0.log.call(e.t0,e.t1),(0,l.JG)("https://api.abako.xyz/api/user/shop/".concat(n,"/movement")),t();case 11:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,a){var o=r.apply(e,t);function s(e){d(o,n,a,s,i,"next",e)}function i(e){d(o,n,a,s,i,"throw",e)}s(void 0)}))}),f=(0,l.ZP)("https://api.abako.xyz/api/user/shop/".concat(n,"/product"),(function(e){return(0,c.Z)(e)})),b=f.data;return f.error?"asd":b?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"modal open py-32 px-10 min-h-screen",children:(0,o.jsxs)("div",{className:"bg-white dark:bg-gray-100 rounded-3xl p-10 md:w-3/4 lg:w-1/2 mx-auto",children:[(0,o.jsx)("h2",{className:"dark:text-white font-bold text-gray-600 ",children:"Nuevo Movimiento"}),(0,o.jsxs)("form",{className:"modal-conteiner",onSubmit:g,children:[(0,o.jsxs)("div",{className:"flex items-center mb-5",children:[(0,o.jsx)("label",{htmlFor:"name",className:"inline-block w-20 mr-6 text-right font-bold dark:text-white text-gray-600",children:"Producto"}),(0,o.jsxs)("select",{id:"firts",name:"product",className:"flex-1 py-2 border-b-2 border-gray-400 focus:border-green-400 text-gray-600 placeholder-gray-400 outline-none",onChange:x,children:[(0,o.jsx)("option",{children:"Seleccione un producto"}),b.map((function(e){return(0,o.jsxs)("option",{value:e.id,children:[e.type," - ",e.brand," - ",e.model]},e.id)}))]})]}),(0,o.jsxs)("div",{className:"flex items-center mb-5",children:[(0,o.jsx)("label",{htmlFor:"name",className:"inline-block w-20 mr-6 text-right font-bold dark:text-white text-gray-600",children:"Cantidad"}),(0,o.jsx)("input",{type:"number",id:"pass",name:"quantity",placeholder:"Cantidad",className:"flex-1 py-2 border-b-2 border-gray-400 focus:border-green-400 text-gray-600 placeholder-gray-400 outline-none",onChange:x})]}),(0,o.jsxs)("div",{className:"flex items-center mb-5",children:[(0,o.jsx)("label",{htmlFor:"name",className:"inline-block w-20 mr-6 text-right font-bold dark:text-white text-gray-600",children:"Tipo"}),(0,o.jsxs)("select",{name:"type",className:"flex-1 py-2 border-b-2 border-gray-400 focus:border-green-400 text-gray-600 placeholder-gray-400 outline-none",onChange:x,children:[(0,o.jsx)("option",{children:"Seleccione el tipo de movimiento"}),(0,o.jsx)("option",{value:!0,children:"Entrada"}),(0,o.jsx)("option",{value:!1,children:"Salida"})]})]}),(0,o.jsxs)("div",{className:"text-right mx-2",children:[(0,o.jsx)("button",{className:"py-3 px-8 bg-green-400 text-white font-bold mx-2",type:"submit",children:"Agregar"}),(0,o.jsx)("button",{className:"py-3 px-8 bg-red-400 text-white font-bold",onClick:t,children:"Cerrar"})]})]})]})})}):"Loading"}var h=t(9521),m=t(7772);function x(e,r,t,n,a,o,s){try{var i=e[o](s),l=i.value}catch(c){return void t(c)}i.done?r(l):Promise.resolve(l).then(n,a)}function g(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function f(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){g(e,r,t[r])}))}return e}function b(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function j(e){var r,t=e.shop_id,n=function(e){var r=new Date(e),t=""+(r.getMonth()+1),n=""+r.getDate(),a=r.getFullYear();return t.length<2&&(t="0"+t),n.length<2&&(n="0"+n),[n,t,a].join("/")+" "+[r.toLocaleTimeString()]},l=(0,i.useState)(""),c=l[0],d=l[1],u=(0,i.useState)([]),g=u[0],j=u[1],y=(r=a().mark((function e(){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t?"https://api.abako.xyz/api/user/shop/".concat(t,"/movement"):"https://api.abako.xyz/api/user/movement",{headers:{accessToken:s.Z.get("accessToken"),refreshToken:s.Z.get("refreshToken")},credentials:"include"});case 2:return r=e.sent,e.next=5,r.json();case 5:n=e.sent,j(n.data);case 7:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,a){var o=r.apply(e,t);function s(e){x(o,n,a,s,i,"next",e)}function i(e){x(o,n,a,s,i,"throw",e)}s(void 0)}))}),v=(0,i.useMemo)((function(){return[]}),[]);v=t?(0,i.useMemo)((function(){return[{Header:"Tipo",accessor:"product.type"},{Header:"Marca",accessor:"product.brand"},{Header:"Modelo",accessor:"product.model"},{Header:"Encargado",accessor:"createdBy.username"},{Header:"Fecha",accessor:"createdAt",Cell:function(e){var r=e.row.original;return n(r.createdAt)}},{Header:"Cantidad",accessor:"quantity"},{Header:"",accessor:"type",Cell:function(e){return!0===e.row.original.type?(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 11l3-3m0 0l3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z"})}):(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13l-3 3m0 0l-3-3m3 3V8m0 13a9 9 0 110-18 9 9 0 010 18z"})})}}]}),[]):(0,i.useMemo)((function(){return[{Header:"Tipo",accessor:"product.type"},{Header:"Marca",accessor:"product.brand"},{Header:"Modelo",accessor:"product.model"},{Header:"Encargado",accessor:"createdBy.username"},{Header:"Fecha",accessor:"createdAt",Cell:function(e){var r=e.row.original;return n(r.createdAt)}},{Header:"Cantidad",accessor:"quantity"},{Header:"",accessor:"type",Cell:function(e){return!0===e.row.original.type?(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 11l3-3m0 0l3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z"})}):(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13l-3 3m0 0l-3-3m3 3V8m0 13a9 9 0 110-18 9 9 0 010 18z"})})}},{Header:"Tienda",accessor:"shop.name"}]}),[]);var w=(0,i.useMemo)((function(){return b(g)}),[g]),k=(0,h.useTable)({columns:v,data:w,initialState:{pageIndex:0}},h.useGlobalFilter,h.useSortBy,h.usePagination),N=k.getTableProps,P=k.getTableBodyProps,C=k.headerGroups,S=(k.rows,k.prepareRow),O=k.preGlobalFilteredRows,T=k.setGlobalFilter,F=k.state,H=k.page,M=k.canPreviousPage,G=k.canNextPage,z=k.pageOptions,A=k.pageCount,L=k.gotoPage,B=k.nextPage,E=k.previousPage,Z=k.setPageSize,_=k.state,D=_.pageIndex,R=_.pageSize;return(0,i.useEffect)((function(){y()}),[c]),(0,o.jsxs)("div",{children:[t?(0,o.jsxs)("div",{className:"grid grid-cols-2",children:[(0,o.jsx)("div",{children:(0,o.jsx)("button",{onClick:function(){d("true")},className:"p-4",children:" + A\xf1adir"})}),(0,o.jsxs)("div",{className:"p-4 justify-self-end",children:[" ",(0,o.jsx)(m.Z,{preGlobalFilteredRows:O,setGlobalFilter:T,globalFilter:F.globalFilter})]})]}):(0,o.jsxs)("div",{className:"grid grid-cols-1",children:[" ",(0,o.jsxs)("div",{className:"p-4 justify-self-start",children:[" ",(0,o.jsx)(m.Z,{preGlobalFilteredRows:O,setGlobalFilter:T,globalFilter:F.globalFilter})]})]}),""==c?(0,o.jsx)(o.Fragment,{}):(0,o.jsx)(p,{shop_id:t,handleModal:function(){d("")}}),(0,o.jsxs)("table",f({},N(),{className:"items-center bg-transparent w-full border-collapse text-center",children:[(0,o.jsx)("thead",{children:C.map((function(e){return(0,o.jsx)("tr",f({},e.getHeaderGroupProps(),{children:e.headers.map((function(e){return(0,o.jsxs)("th",f({},e.getHeaderProps(e.getSortByToggleProps()),{className:"px-6 bg-blueGray-50 text-blueGray-500 align-middle border border-solid border-blueGray-100 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold",children:[e.render("Header"),(0,o.jsx)("span",{children:e.isSorted?e.isSortedDesc?"\u25bc":"\u25b2":""})]}))}))}))}))}),(0,o.jsx)("tbody",f({},P(),{children:H.map((function(e,r){return S(e),(0,o.jsx)("tr",f({},e.getRowProps(),{children:e.cells.map((function(e){return(0,o.jsx)("td",f({},e.getCellProps(),{className:"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4 text-blueGray-700 ",children:e.render("Cell")}))}))}))}))}))]})),(0,o.jsxs)("div",{className:"pagination grid grid-cols-3 px-2",children:[(0,o.jsxs)("div",{className:"justify-self-start",children:[(0,o.jsxs)("span",{children:["Ir a la pag.:"," ",(0,o.jsx)("input",{type:"number",defaultValue:D+1,onChange:function(e){var r=e.target.value?Number(e.target.value)-1:0;L(r)},style:{width:"100px"}})]})," "]}),(0,o.jsxs)("div",{className:"justify-self-center",children:[(0,o.jsx)("button",{onClick:function(){return L(0)},disabled:!M,children:"<<"})," ",(0,o.jsx)("button",{onClick:function(){return E()},disabled:!M,children:"<"})," ",(0,o.jsx)("button",{onClick:function(){return B()},disabled:!G,children:">"})," ",(0,o.jsx)("button",{onClick:function(){return L(A-1)},disabled:!G,children:">>"})," ",(0,o.jsxs)("span",{children:["Pagina"," ",(0,o.jsxs)("strong",{children:[D+1," of ",z.length]})," "]})]}),(0,o.jsx)("div",{className:"justify-self-end",children:(0,o.jsx)("select",{value:R,onChange:function(e){Z(Number(e.target.value))},children:[10,20,30,40,50].map((function(e){return(0,o.jsxs)("option",{value:e,children:["Mostrar ",e]},e)}))})})]})]})}}}]);